# 의존 관계
A는 B에 의존적이다.<br>
ex) 물건의 가격은 공급에 의해 의존된다.

### 코드상에서 의존하는경우
1. 다른 클래스의 레퍼런스 변수를 사용하는 경우
2. 다른 클래스의 인스턴스를 생성하는 경우
3. 다른 클래스를 상속받는 경우

chap01_02 보셈<br>
위의  1, 2 번을 인터페이스를 사용해서 해결함
<br>

강한의존 약한의존 -> 각 클래스가 다른 클래스에 대하여 얼마나 알고 있냐?

# 의존 역전
**고수준 컴포넌트**가 **저수준 컴포넌트**에 의존하지 않도록 의존 관계를 역전 시키는 것
* 고수준: 구체적인 기술을 사용하지 않는 클래스 -> 정책, 비즈니스 로직 등
* 저수준: 구체적인 기술을 사용하는 클래스

controller -> service -> repository<br>
* service는  기술에 종속적이지 않음
* repository는 기술에 종속적임 

따라서 만약에 repository가 바뀌어야하면 매번 코드를 수정해야한다.

이전에 배웠던것 처럼 interface를 통해 **의존 역전**을 구현 할 수 있음(inferface로 의존 방향이 모이도록)

# 의존 주입 패턴
의존 주입 패턴은 어떤 클래스의 인스턴스를 사용할지 **코드 수정 없이, 실행 시점(Runtime)에 지정**할 수 있다.
### 의존 관계가 생기는 경우
* 클래스 또는 인터페이스의 레퍼런스 변수 사용
  * 의존 역전을 적용하면서 인터페이스에 의존하도록 변경
* 클래스의 인스턴스를 생성
  * 외부에서 주입하도록 변경
* 클래스 또는 인터페이스를 상속
  * 상속이 굳이 필요하지 않으면 굳이 쓰지 말자~ 

# 의존성을 주입 해주는 주체
### 의존? 의존성?
특정 프로젝트에서 사용하는 라이브러리들을 **의존성**이라고함

애플리케이션 컨텍스트 = IoC Container = Bean Factory (일단은 이렇게 하고 넘어가자)<br>
스프링 프레임워크에서 생성하여 Service에게 주입<br>

Bean: 애플리케이션 컨텍스트에 등록되어 필요한 곳에 등록되어 주입해주는 것<br>
(별다른 설정을 안하면 동일한 설정에 대해서 동일한 타입의 인스턴스는 하나만 생성됨 = 싱글톤)<br>
(Bean이 하나만 생성되어야 하는 이유는 모든 클래스들에 대해서 메서드만 활용하기 때문에 하나의 인스턴스만 생성하면 되기 때문에)

### 실행 시점에 어떻게 다른 빈을 주입시켜줄까?
Spring Profile

@Profile() 어노테이션 사용

### 실행 할 때가 아니라 실행 도중에 다른 빈 주입하기
@order(0)<br>
@order(1)<br>
사용해라~ (숫자가 낮을수록 우선순위 높음)(사실 잘 안씀)
